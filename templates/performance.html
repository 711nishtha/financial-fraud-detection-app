{% extends "base.html" %}

{% block title %}Model Performance | Fraud Detection Metrics{% endblock %}

{% block content %}
    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-badge">üìà MODEL PERFORMANCE</div>
        <h1>Machine Learning Excellence</h1>
        <p>State-of-the-art fraud detection achieving 99.63% recall with advanced ensemble methods</p>
    </section>

    <!-- Main Content -->
    <div class="container">
        
        <!-- Key Performance Metrics -->
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 24px; margin-bottom: 50px;">
            <!-- Recall -->
            <div class="metric-card">
                <div class="metric-icon" style="background: linear-gradient(135deg, var(--success) 0%, #059669 100%);">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                        <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                </div>
                <div class="metric-value">99.63%</div>
                <div class="metric-label">Recall Rate</div>
                <div class="metric-description">Fraud Detection Rate</div>
            </div>

            <!-- Precision -->
            <div class="metric-card">
                <div class="metric-icon" style="background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <circle cx="12" cy="12" r="3"></circle>
                    </svg>
                </div>
                <div class="metric-value">88.20%</div>
                <div class="metric-label">Precision</div>
                <div class="metric-description">Accuracy of Fraud Predictions</div>
            </div>

            <!-- F1 Score -->
            <div class="metric-card">
                <div class="metric-icon" style="background: var(--gold-gradient);">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                        <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                    </svg>
                </div>
                <div class="metric-value">93.57%</div>
                <div class="metric-label">F1 Score</div>
                <div class="metric-description">Harmonic Mean Balance</div>
            </div>

            <!-- AUC-ROC -->
            <div class="metric-card">
                <div class="metric-icon" style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                        <path d="M3 3v18h18"></path>
                        <path d="M7 12l3-3 4 4 5-5"></path>
                    </svg>
                </div>
                <div class="metric-value">0.9995</div>
                <div class="metric-label">AUC-ROC</div>
                <div class="metric-description">Near-Perfect Classification</div>
            </div>

            <!-- Accuracy -->
            <div class="metric-card">
                <div class="metric-icon" style="background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                        <polyline points="22 4 12 14.01 9 11.01"></polyline>
                    </svg>
                </div>
                <div class="metric-value">99.98%</div>
                <div class="metric-label">Accuracy</div>
                <div class="metric-description">Overall Correct Predictions</div>
            </div>
        </div>

        <!-- Model Comparison -->
        <div class="card">
            <h2 class="card-title">Model Comparison Analysis</h2>
            <p style="color: #666; margin-bottom: 30px;">
                Evaluated 5 machine learning algorithms. <strong style="color: var(--primary);">Random Forest</strong> achieved the highest F1 score (99.88%), while <strong style="color: var(--primary);">XGBoost</strong> was selected for production deployment due to superior business metrics.
            </p>

            <!-- Model Comparison Grid -->
            <div class="model-grid">
                <!-- Random Forest - Best F1 -->
                <div class="model-card champion">
                    <div class="model-badge">üèÜ HIGHEST F1</div>
                    <h3>Random Forest</h3>
                    <div class="model-metrics">
                        <div class="model-metric-item">
                            <span class="model-metric-label">Precision</span>
                            <div class="model-metric-bar">
                                <div class="model-metric-fill" style="width: 100%; background: var(--success);"></div>
                            </div>
                            <span class="model-metric-value">100.00%</span>
                        </div>
                        <div class="model-metric-item">
                            <span class="model-metric-label">Recall</span>
                            <div class="model-metric-bar">
                                <div class="model-metric-fill" style="width: 99.76%; background: var(--success);"></div>
                            </div>
                            <span class="model-metric-value">99.76%</span>
                        </div>
                        <div class="model-metric-item">
                            <span class="model-metric-label">F1 Score</span>
                            <div class="model-metric-bar">
                                <div class="model-metric-fill" style="width: 99.88%; background: var(--primary);"></div>
                            </div>
                            <span class="model-metric-value">99.88%</span>
                        </div>
                        <div class="model-metric-item">
                            <span class="model-metric-label">AUC-ROC</span>
                            <div class="model-metric-bar">
                                <div class="model-metric-fill" style="width: 99.91%; background: var(--accent);"></div>
                            </div>
                            <span class="model-metric-value">0.9991</span>
                        </div>
                    </div>
                </div>

                <!-- XGBoost - Production Model -->
                <div class="model-card production">
                    <div class="model-badge" style="background: var(--primary);">‚ö° PRODUCTION</div>
                    <h3>XGBoost</h3>
                    <div class="model-metrics">
                        <div class="model-metric-item">
                            <span class="model-metric-label">Precision</span>
                            <div class="model-metric-bar">
                                <div class="model-metric-fill" style="width: 88.20%; background: var(--success);"></div>
                            </div>
                            <span class="model-metric-value">88.20%</span>
                        </div>
                        <div class="model-metric-item">
                            <span class="model-metric-label">Recall</span>
                            <div class="model-metric-bar">
                                <div class="model-metric-fill" style="width: 99.63%; background: var(--success);"></div>
                            </div>
                            <span class="model-metric-value">99.63%</span>
                        </div>
                        <div class="model-metric-item">
                            <span class="model-metric-label">F1 Score</span>
                            <div class="model-metric-bar">
                                <div class="model-metric-fill" style="width: 93.57%; background: var(--primary);"></div>
                            </div>
                            <span class="model-metric-value">93.57%</span>
                        </div>
                        <div class="model-metric-item">
                            <span class="model-metric-label">AUC-ROC</span>
                            <div class="model-metric-bar">
                                <div class="model-metric-fill" style="width: 99.95%; background: var(--accent);"></div>
                            </div>
                            <span class="model-metric-value">0.9995</span>
                        </div>
                    </div>
                </div>

                <!-- LightGBM -->
                <div class="model-card">
                    <div class="model-badge" style="background: #8b5cf6;">‚≠ê STRONG</div>
                    <h3>LightGBM</h3>
                    <div class="model-metrics">
                        <div class="model-metric-item">
                            <span class="model-metric-label">Precision</span>
                            <div class="model-metric-bar">
                                <div class="model-metric-fill" style="width: 99.63%; background: var(--success);"></div>
                            </div>
                            <span class="model-metric-value">99.63%</span>
                        </div>
                        <div class="model-metric-item">
                            <span class="model-metric-label">Recall</span>
                            <div class="model-metric-bar">
                                <div class="model-metric-fill" style="width: 98.54%; background: var(--success);"></div>
                            </div>
                            <span class="model-metric-value">98.54%</span>
                        </div>
                        <div class="model-metric-item">
                            <span class="model-metric-label">F1 Score</span>
                            <div class="model-metric-bar">
                                <div class="model-metric-fill" style="width: 99.08%; background: var(--primary);"></div>
                            </div>
                            <span class="model-metric-value">99.08%</span>
                        </div>
                        <div class="model-metric-item">
                            <span class="model-metric-label">AUC-ROC</span>
                            <div class="model-metric-bar">
                                <div class="model-metric-fill" style="width: 99.92%; background: var(--accent);"></div>
                            </div>
                            <span class="model-metric-value">0.9992</span>
                        </div>
                    </div>
                </div>

                <!-- Gradient Boosting -->
                <div class="model-card">
                    <div class="model-badge" style="background: #06b6d4;">‚úì GOOD</div>
                    <h3>Gradient Boosting</h3>
                    <div class="model-metrics">
                        <div class="model-metric-item">
                            <span class="model-metric-label">Precision</span>
                            <div class="model-metric-bar">
                                <div class="model-metric-fill" style="width: 91.92%; background: var(--success);"></div>
                            </div>
                            <span class="model-metric-value">91.92%</span>
                        </div>
                        <div class="model-metric-item">
                            <span class="model-metric-label">Recall</span>
                            <div class="model-metric-bar">
                                <div class="model-metric-fill" style="width: 99.76%; background: var(--success);"></div>
                            </div>
                            <span class="model-metric-value">99.76%</span>
                        </div>
                        <div class="model-metric-item">
                            <span class="model-metric-label">F1 Score</span>
                            <div class="model-metric-bar">
                                <div class="model-metric-fill" style="width: 95.68%; background: var(--primary);"></div>
                            </div>
                            <span class="model-metric-value">95.68%</span>
                        </div>
                        <div class="model-metric-item">
                            <span class="model-metric-label">AUC-ROC</span>
                            <div class="model-metric-bar">
                                <div class="model-metric-fill" style="width: 99.86%; background: var(--accent);"></div>
                            </div>
                            <span class="model-metric-value">0.9986</span>
                        </div>
                    </div>
                </div>

                <!-- Logistic Regression -->
                <div class="model-card">
                    <div class="model-badge" style="background: #f59e0b;">‚ö† BASELINE</div>
                    <h3>Logistic Regression</h3>
                    <div class="model-metrics">
                        <div class="model-metric-item">
                            <span class="model-metric-label">Precision</span>
                            <div class="model-metric-bar">
                                <div class="model-metric-fill" style="width: 5.31%; background: var(--danger);"></div>
                            </div>
                            <span class="model-metric-value">5.31%</span>
                        </div>
                        <div class="model-metric-item">
                            <span class="model-metric-label">Recall</span>
                            <div class="model-metric-bar">
                                <div class="model-metric-fill" style="width: 99.70%; background: var(--success);"></div>
                            </div>
                            <span class="model-metric-value">99.70%</span>
                        </div>
                        <div class="model-metric-item">
                            <span class="model-metric-label">F1 Score</span>
                            <div class="model-metric-bar">
                                <div class="model-metric-fill" style="width: 10.09%; background: var(--danger);"></div>
                            </div>
                            <span class="model-metric-value">10.09%</span>
                        </div>
                        <div class="model-metric-item">
                            <span class="model-metric-label">AUC-ROC</span>
                            <div class="model-metric-bar">
                                <div class="model-metric-fill" style="width: 99.78%; background: var(--accent);"></div>
                            </div>
                            <span class="model-metric-value">0.9978</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="insight-box" style="margin-top: 30px;">
                <strong>üí° Model Selection:</strong> While Random Forest achieved the highest F1 score (99.88%), XGBoost was selected for production due to optimal business threshold performance (0.1 threshold) and superior handling of edge cases, achieving $2.4B+ in projected annual savings.
            </div>
        </div>

        <!-- Feature Importance -->
        <div class="card">
            <h2 class="card-title">Feature Importance Analysis</h2>
            <p style="color: #666; margin-bottom: 30px;">
                Top predictive features identified through model analysis. <strong style="color: var(--primary);">Balance consistency</strong> dominates with 78.6% importance.
            </p>

            <div class="feature-list">
                <!-- Feature 1 -->
                <div class="feature-item">
                    <div class="feature-header">
                        <span class="feature-rank">1</span>
                        <span class="feature-name">orig_balance_consistent</span>
                        <span class="feature-percentage">78.59%</span>
                    </div>
                    <div class="feature-bar-container">
                        <div class="feature-bar" style="width: 78.59%; background: linear-gradient(90deg, var(--primary) 0%, var(--accent) 100%);"></div>
                    </div>
                    <p class="feature-description">Whether origin balance change matches transaction amount ‚Äî critical fraud indicator</p>
                </div>

                <!-- Feature 2 -->
                <div class="feature-item">
                    <div class="feature-header">
                        <span class="feature-rank">2</span>
                        <span class="feature-name">newbalanceOrig</span>
                        <span class="feature-percentage">8.92%</span>
                    </div>
                    <div class="feature-bar-container">
                        <div class="feature-bar" style="width: 8.92%; background: linear-gradient(90deg, #10b981 0%, #059669 100%);"></div>
                    </div>
                    <p class="feature-description">Origin account balance after transaction completion</p>
                </div>

                <!-- Feature 3 -->
                <div class="feature-item">
                    <div class="feature-header">
                        <span class="feature-rank">3</span>
                        <span class="feature-name">is_amount_rounded</span>
                        <span class="feature-percentage">3.45%</span>
                    </div>
                    <div class="feature-bar-container">
                        <div class="feature-bar" style="width: 3.45%; background: linear-gradient(90deg, #f59e0b 0%, #d97706 100%);"></div>
                    </div>
                    <p class="feature-description">Transaction amount rounded to nearest $1,000 ‚Äî common in fraud</p>
                </div>

                <!-- Feature 4 -->
                <div class="feature-item">
                    <div class="feature-header">
                        <span class="feature-rank">4</span>
                        <span class="feature-name">type_PAYMENT</span>
                        <span class="feature-percentage">3.30%</span>
                    </div>
                    <div class="feature-bar-container">
                        <div class="feature-bar" style="width: 3.30%; background: linear-gradient(90deg, #8b5cf6 0%, #7c3aed 100%);"></div>
                    </div>
                    <p class="feature-description">Payment transaction type encoding</p>
                </div>

                <!-- Feature 5 -->
                <div class="feature-item">
                    <div class="feature-header">
                        <span class="feature-rank">5</span>
                        <span class="feature-name">amount_to_oldbalance_orig_ratio</span>
                        <span class="feature-percentage">0.88%</span>
                    </div>
                    <div class="feature-bar-container">
                        <div class="feature-bar" style="width: 0.88%; background: linear-gradient(90deg, #06b6d4 0%, #0891b2 100%);"></div>
                    </div>
                    <p class="feature-description">Ratio of transaction amount to origin account balance</p>
                </div>

                <!-- Feature 6 -->
                <div class="feature-item">
                    <div class="feature-header">
                        <span class="feature-rank">6</span>
                        <span class="feature-name">balance_diff_orig</span>
                        <span class="feature-percentage">0.80%</span>
                    </div>
                    <div class="feature-bar-container">
                        <div class="feature-bar" style="width: 0.80%; background: linear-gradient(90deg, #ec4899 0%, #db2777 100%);"></div>
                    </div>
                    <p class="feature-description">Change in origin account balance during transaction</p>
                </div>

                <!-- Feature 7-10 Combined -->
                <div class="feature-item" style="opacity: 0.7;">
                    <div class="feature-header">
                        <span class="feature-rank">7-29</span>
                        <span class="feature-name">Other Features (Combined)</span>
                        <span class="feature-percentage">4.06%</span>
                    </div>
                    <div class="feature-bar-container">
                        <div class="feature-bar" style="width: 4.06%; background: linear-gradient(90deg, #94a3b8 0%, #64748b 100%);"></div>
                    </div>
                    <p class="feature-description">Remaining 23 engineered features contributing to model accuracy</p>
                </div>
            </div>
        </div>

        <!-- Confusion Matrix -->
        <div class="card">
            <h2 class="card-title">Confusion Matrix Analysis</h2>
            <p style="color: #666; margin-bottom: 30px;">
                Model performance on test set of <strong>1,272,524 transactions</strong> with excellent fraud detection and minimal false positives.
            </p>

            <div class="confusion-matrix-container">
                <div class="confusion-matrix">
                    <!-- Header Labels -->
                    <div class="cm-label-top">Predicted Non-Fraud</div>
                    <div class="cm-label-top">Predicted Fraud</div>

                    <!-- Row 1 -->
                    <div class="cm-label-left">Actual Non-Fraud</div>
                    <div class="cm-cell true-negative">
                        <div class="cm-count">1,270,881</div>
                        <div class="cm-label">True Negative</div>
                        <div class="cm-percentage">99.84%</div>
                    </div>
                    <div class="cm-cell false-positive">
                        <div class="cm-count">0</div>
                        <div class="cm-label">False Positive</div>
                        <div class="cm-percentage">0.00%</div>
                    </div>

                    <!-- Row 2 -->
                    <div class="cm-label-left">Actual Fraud</div>
                    <div class="cm-cell false-negative">
                        <div class="cm-count">4</div>
                        <div class="cm-label">False Negative</div>
                        <div class="cm-percentage">0.24%</div>
                    </div>
                    <div class="cm-cell true-positive">
                        <div class="cm-count">1,639</div>
                        <div class="cm-label">True Positive</div>
                        <div class="cm-percentage">99.76%</div>
                    </div>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 30px;">
                <div class="cm-metric">
                    <div class="cm-metric-label">True Positives</div>
                    <div class="cm-metric-value" style="color: var(--success);">1,639</div>
                    <div class="cm-metric-desc">Correctly identified fraud</div>
                </div>
                <div class="cm-metric">
                    <div class="cm-metric-label">False Negatives</div>
                    <div class="cm-metric-value" style="color: var(--danger);">4</div>
                    <div class="cm-metric-desc">Missed fraud cases</div>
                </div>
                <div class="cm-metric">
                    <div class="cm-metric-label">False Positives</div>
                    <div class="cm-metric-value" style="color: #f59e0b;">0</div>
                    <div class="cm-metric-desc">Incorrectly flagged</div>
                </div>
                <div class="cm-metric">
                    <div class="cm-metric-label">True Negatives</div>
                    <div class="cm-metric-value" style="color: var(--primary);">1,270,881</div>
                    <div class="cm-metric-desc">Correctly identified legitimate</div>
                </div>
            </div>
        </div>

        <!-- Technical Highlights -->
        <div class="card" style="background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%); border: 2px solid var(--primary);">
            <h2 class="card-title">Technical Achievements</h2>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 24px;">
                <div class="achievement-item">
                    <div class="achievement-icon">üéØ</div>
                    <h3>Near-Perfect ROC</h3>
                    <p>AUC-ROC of <strong>0.9995</strong> demonstrates exceptional model discrimination capability</p>
                </div>

                <div class="achievement-item">
                    <div class="achievement-icon">‚ö°</div>
                    <h3>Fast Inference</h3>
                    <p>Real-time predictions in <strong>&lt;100ms</strong> enabling instant fraud detection</p>
                </div>

                <div class="achievement-item">
                    <div class="achievement-icon">üîÑ</div>
                    <h3>Class Imbalance Handled</h3>
                    <p>Successfully overcame <strong>0.129%</strong> fraud rate using SMOTE and threshold optimization</p>
                </div>

                <div class="achievement-item">
                    <div class="achievement-icon">üìä</div>
                    <h3>29 Engineered Features</h3>
                    <p>Advanced feature engineering creating <strong>balance-based</strong> fraud indicators</p>
                </div>
            </div>
        </div>

    </div>

    <!-- Custom Styles for Performance Page -->
    <style>
        .metric-card {
            background: white;
            border-radius: 16px;
            padding: 28px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 100, 0, 0.08);
            transition: all 0.3s ease;
        }

        .metric-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 50px rgba(0, 100, 0, 0.15);
        }

        .metric-icon {
            width: 64px;
            height: 64px;
            margin: 0 auto 16px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .metric-value {
            font-family: 'Playfair Display', serif;
            font-size: 2.75rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 8px;
            letter-spacing: -1px;
        }

        .metric-label {
            font-size: 1rem;
            color: var(--text);
            font-weight: 700;
            margin-bottom: 6px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .metric-description {
            font-size: 0.8rem;
            color: #666;
            font-weight: 400;
        }

        .model-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 24px;
        }

        .model-card {
            background: white;
            border-radius: 16px;
            padding: 28px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .model-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(0, 100, 0, 0.12);
        }

        .model-card.champion {
            border-color: var(--accent);
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
        }

        .model-card.production {
            border-color: var(--primary);
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
        }

        .model-badge {
            display: inline-block;
            background: var(--accent);
            color: white;
            padding: 6px 16px;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 700;
            letter-spacing: 0.5px;
            margin-bottom: 16px;
        }

        .model-card h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 20px;
        }

        .model-metrics {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .model-metric-item {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .model-metric-label {
            font-size: 0.8rem;
            color: #666;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .model-metric-bar {
            height: 10px;
            background: #f1f5f9;
            border-radius: 5px;
            overflow: hidden;
        }

        .model-metric-fill {
            height: 100%;
            transition: width 1.5s ease;
            border-radius: 5px;
        }

        .model-metric-value {
            font-family: 'Playfair Display', serif;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--primary);
        }

        .feature-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .feature-item {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.04);
            transition: all 0.3s ease;
        }

        .feature-item:hover {
            transform: translateX(8px);
            box-shadow: 0 4px 20px rgba(0, 100, 0, 0.1);
        }

        .feature-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 12px;
        }

        .feature-rank {
            width: 40px;
            height: 40px;
            background: var(--primary);
            color: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1rem;
        }

        .feature-name {
            flex: 1;
            font-family: 'Courier New', monospace;
            font-size: 1rem;
            font-weight: 600;
            color: var(--primary);
        }

        .feature-percentage {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent);
        }

        .feature-bar-container {
            height: 12px;
            background: #f1f5f9;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .feature-bar {
            height: 100%;
            transition: width 1.5s ease;
            border-radius: 6px;
        }

        .feature-description {
            font-size: 0.875rem;
            color: #666;
            line-height: 1.5;
        }

        .confusion-matrix-container {
            display: flex;
            justify-content: center;
            margin: 30px 0;
        }

        .confusion-matrix {
            display: grid;
            grid-template-columns: 150px 1fr 1fr;
            grid-template-rows: 60px 1fr 1fr;
            gap: 12px;
            max-width: 600px;
        }

        .cm-label-top {
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--primary);
            font-size: 0.9rem;
            text-align: center;
        }

        .cm-label-left {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 16px;
            font-weight: 700;
            color: var(--primary);
            font-size: 0.9rem;
            text-align: right;
        }

        .cm-cell {
            border-radius: 12px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .cm-cell:hover {
            transform: scale(1.05);
        }

        .cm-cell.true-negative {
            background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
            border: 2px solid var(--success);
        }

        .cm-cell.true-positive {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            border: 2px solid var(--success);
        }

        .cm-cell.false-positive {
            background: linear-gradient(135deg, #fed7aa 0%, #fdba74 100%);
            border: 2px solid #f59e0b;
        }

        .cm-cell.false-negative {
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
            border: 2px solid var(--danger);
        }

        .cm-count {
            font-family: 'Playfair Display', serif;
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 6px;
        }

        .cm-label {
            font-size: 0.75rem;
            font-weight: 600;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .cm-percentage {
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--primary);
        }

        .cm-metric {
            text-align: center;
            padding: 20px;
            background: white;
            border-radius: 12px;
        }

        .cm-metric-label {
            font-size: 0.8rem;
            color: #666;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }

        .cm-metric-value {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 6px;
        }

        .cm-metric-desc {
            font-size: 0.8rem;
            color: #666;
        }

        .achievement-item {
            text-align: center;
            padding: 24px;
        }

        .achievement-icon {
            font-size: 3rem;
            margin-bottom: 16px;
        }

        .achievement-item h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.25rem;
            color: var(--primary);
            margin-bottom: 12px;
        }

        .achievement-item p {
            font-size: 0.9rem;
            color: #065f46;
            line-height: 1.5;
        }

        .insight-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-left: 4px solid var(--accent);
            padding: 20px;
            border-radius: 12px;
            color: #92400e;
            font-size: 0.95rem;
            line-height: 1.6;
        }
    </style>
{% endblock %}